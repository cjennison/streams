var Graph = {};

function initGraph(){
	
}

function disableGraph(){
	
}

nv.addGraph(function() {
    var chart = nv.models.lineWithFocusChart();

    chart.x(function(d) {
        return d[0];
    });
    chart.y(function(d) {
        return d[1] || 0; 
// '|| 0' is only needed because 'show_gaps_in_1870_1875_period' may be TRUE, in which case some 'undefined' values might make it through to here. 
// To prevent those from corrupting the axes, we assign them the harmless Y value 0.
    });

    chart.xTickFormat(function(d) { return d3.time.format('%b %Y')(new Date(d)); });

   chart.yAxis
       .axisLabel('Mean monthly sea level compared to year 2000 (inches)');

   chart.xAxis
       .axisLabel('Use the chart below to zoom in and explore the data above');

    chart.forceY([0]);   // List of numbers to Force into the Y scale (ie. 0, or a max / min, etc.)

	chart.defined(function(d) {
		return d[1] || 0;
		// This way we detect any 'undefined' Y values in the data set; this is needed because 
	        // 'show_gaps_in_1870_1875_period' may be TRUE, in which case some 'undefined' values 
		// might make it through to here. Otherwise the NaN filter above ~ line 58 should've taken
		// care of everything 'illegal'.
	});

         chart.yTickFormat(d3.format(',.1f'));
        
/*TODO: MAKE ME WORK!
  d3.select('#chart svg')
      .datum(testData())
    .transition().duration(500)
      .call(chart);
*/
  nv.utils.windowResize(chart.update);

  return chart;
});


function testData() {
return [ 
  {
    "key" : "Future spring flows" ,
    "values" : [ [ 2011,3.90918846266667 ] , [ 2012,3.144489887 ] , [ 2013,2.43241601166667 ] , [ 2014,2.21233715266667 ] , [ 2015,4.46115726466667 ] , [ 2016,4.590159959 ] , [ 2017,3.70013323166667 ] , [ 2018,4.628742657 ] , [ 2019,3.553151525 ] , [ 2020,6.52493790666667 ] , [ 2021,4.97467460233333 ] , [ 2022,3.31719339233333 ] , [ 2023,3.11246887233333 ] , [ 2024,2.658662853 ] , [ 2025,4.56443816033333 ] , [ 2026,4.69225975166667 ] , [ 2027,4.08136703333333 ] , [ 2028,4.84580314166667 ] , [ 2029,4.14934607266667 ] , [ 2030,3.616931087 ] , [ 2031,3.76286292433333 ] , [ 2032,3.028348092 ] , [ 2033,4.676380478 ] , [ 2034,4.28412304833333 ] , [ 2035,3.374804972 ] , [ 2036,2.585434467 ] , [ 2037,3.04790190833333 ] , [ 2038,5.94317906233333 ] , [ 2039,2.60092003966667 ] , [ 2040,6.90499060533333 ] , [ 2041,6.50617149233333 ] , [ 2042,4.480711081 ] , [ 2043,4.059844712 ] , [ 2044,4.25695767933333 ] , [ 2045,4.37651154966667 ] , [ 2046,3.583072801 ] , [ 2047,4.355120462 ] , [ 2048,3.168899349 ] , [ 2049,3.56561872333333 ] , [ 2050,4.86785039766667 ] , [ 2051,5.132286236 ] , [ 2052,3.725592563 ] , [ 2053,3.48950319666667 ] , [ 2054,4.85052755366667 ] , [ 2055,4.16798125333333 ] , [ 2056,2.031103459 ] , [ 2057,4.785829356 ] , [ 2058,6.659846116 ] , [ 2059,3.17716707 ] , [ 2060,3.80485769766667 ] , [ 2061,4.01588143366667 ] , [ 2062,4.53412318333333 ] , [ 2063,4.35092098466667 ] , [ 2064,2.51089374433333 ] , [ 2065,4.06548775966667 ] , [ 2066,4.44265331766667 ] , [ 2067,5.66168284733333 ] , [ 2068,3.84672123733333 ] , [ 2069,2.97782313033333 ] , [ 2070,4.22782380533333 ] , [ 2071,3.070474099 ] , [ 2072,2.997639414 ] , [ 2073,2.076379074 ] , [ 2074,3.70971328933333 ] , [ 2075,5.02060638566667 ] , [ 2076,4.61168228033333 ] , [ 2077,2.87690444066667 ] , [ 2078,4.38884751433333 ] , [ 2079,2.272835873 ] , [ 2080,4.87073753833333 ]  ]
  } ,
  {
    "key" : "Past spring flows" ,
    "values" : [ [ 1949,3.10853186233333 ] , [ 1950,3.600001944 ] , [ 1951,4.28766635733333 ] , [ 1952,4.47139349066667 ] , [ 1953,6.788980044 ] , [ 1954,4.71561934433333 ] , [ 1955,3.94698375866667 ] , [ 1956,3.636222436 ] , [ 1957,2.73884662333333 ] , [ 1958,3.35931939933333 ] , [ 1959,3.077954418 ] , [ 1960,3.783860311 ] , [ 1961,4.16050093433333 ] , [ 1962,2.60223237633333 ] , [ 1963,2.56168117333333 ] , [ 1964,2.42900393633333 ] , [ 1965,1.904725438 ] , [ 1966,1.93714015366667 ] , [ 1967,4.466931546 ] , [ 1968,3.92231182933333 ] , [ 1969,3.53989692466667 ] , [ 1970,3.98674755966667 ] , [ 1971,3.09816440266667 ] , [ 1972,5.26955665133333 ] , [ 1973,5.26601334233333 ] , [ 1974,4.32533041966667 ] , [ 1975,3.30918813866667 ] , [ 1976,3.69777102566667 ] , [ 1977,4.76837527833333 ] , [ 1978,2.78333483633333 ] , [ 1979,5.21798182033333 ] , [ 1980,4.896853038 ] , [ 1981,2.250394916 ] , [ 1982,3.39107794666667 ] , [ 1983,7.663783666 ] , [ 1984,7.32625067533333 ] , [ 1985,2.83018525533333 ] , [ 1986,2.77729808766667 ] , [ 1987,4.38215459733333 ] , [ 1988,3.10918803066667 ] , [ 1989,5.19869047133333 ] , [ 1990,5.18110516 ] , [ 1991,4.27165585 ] , [ 1992,3.737797294 ] , [ 1993,4.85682676966667 ] , [ 1994,4.67178729966667 ] , [ 1995,2.132284616 ] , [ 1996,5.02336229266667 ] , [ 1997,4.18569779833333 ] , [ 1998,4.41916249133333 ] , [ 1999,3.37178659766667 ] , [ 2000,4.468900051 ] , [ 2001,4.073624247 ] , [ 2002,4.138978613 ] , [ 2003,3.82926715966667 ] , [ 2004,4.41430684566667 ] , [ 2005,4.10341428933333 ] , [ 2006,3.38910944166667 ] , [ 2007,4.88911025166667 ] , [ 2008,3.989765934 ] , [ 2009,3.414175072 ] , [ 2010,3.29239022933333 ] ]
  } ,
  {
    "key" : "Past fall flows" ,
    "values" : [ [ 1949,2.78845294933333 ] , [ 1950,3.561025545 ] , [ 1951,4.835041981 ] , [ 1952,2.79672067033333 ] , [ 1953,3.09357122433333 ] , [ 1954,5.365750929 ] , [ 1955,7.33596196666667 ] , [ 1956,3.93162941966667 ] , [ 1957,3.02624835333333 ] , [ 1958,3.99750872033333 ] , [ 1959,5.12729935666667 ] , [ 1960,4.34816507766667 ] , [ 1961,2.72099884466667 ] , [ 1962,3.90380788233333 ] , [ 1963,3.47139295066667 ] , [ 1964,1.66391165966667 ] , [ 1965,3.159056824 ] , [ 1966,4.626380451 ] , [ 1967,2.90301994033333 ] , [ 1968,4.49855885966667 ] , [ 1969,4.39068478566667 ] , [ 1970,3.017324464 ] , [ 1971,3.734647686 ] , [ 1972,4.48911003566667 ] , [ 1973,2.53530320633333 ] , [ 1974,4.248427491 ] , [ 1975,6.088585965 ] , [ 1976,2.83202252666667 ] , [ 1977,6.79777269966667 ] , [ 1978,1.90879368166667 ] , [ 1979,4.835829383 ] , [ 1980,2.837796808 ] , [ 1981,3.593702728 ] , [ 1982,2.57532947466667 ] , [ 1983,4.55052739166667 ] , [ 1984,2.69540827966667 ] , [ 1985,4.85407086266667 ] , [ 1986,3.402364042 ] , [ 1987,5.35525223566667 ] , [ 1988,3.99225937366667 ] , [ 1989,5.66745712866667 ] , [ 1990,4.172836899 ] , [ 1991,5.59750958433333 ] , [ 1992,3.33753461066667 ] , [ 1993,4.18530409733333 ] , [ 1994,3.20328256966667 ] , [ 1995,6.74659156966667 ] , [ 1996,5.79239157933333 ] , [ 1997,4.110632141 ] , [ 1998,3.306300998 ] , [ 1999,6.58845500133333 ] , [ 2000,3.29816451066667 ] , [ 2001,2.64396468233333 ] , [ 2002,4.51470060066667 ] , [ 2003,6.388979828 ] , [ 2004,4.687404106 ] , [ 2005,7.7559097 ] , [ 2006,4.80065876033333 ] , [ 2007,3.34147162066667 ] , [ 2008,5.11876916833333 ] , [ 2009,3.45275777 ] , [ 2010,4.72493693466667 ] ]
  } ,
  {
    "key" : "Future fall flows" ,
    "values" : [ [ 2011,4.037797456 ] , [ 2012,5.607483343 ] , [ 2013,3.68202298566667 ] , [ 2014,3.28805951833333 ] , [ 2015,3.851183182 ] , [ 2016,2.160631088 ] , [ 2017,5.587010891 ] , [ 2018,4.276380262 ] , [ 2019,3.42218032566667 ] , [ 2020,3.859844604 ] , [ 2021,3.189371801 ] , [ 2022,4.75722041666667 ] , [ 2023,2.82493590866667 ] , [ 2024,4.00498903933333 ] , [ 2025,3.97533023066667 ] , [ 2026,3.13753450266667 ] , [ 2027,4.84462203866667 ] , [ 2028,2.08989614166667 ] , [ 2029,4.43950370966667 ] , [ 2030,4.16758755233333 ] , [ 2031,5.87926826666667 ] , [ 2032,2.88609079733333 ] , [ 2033,2.992521301 ] , [ 2034,3.30302015633333 ] , [ 2035,3.1102379 ] , [ 2036,6.15485896666667 ] , [ 2037,3.87742991533333 ] , [ 2038,6.729137492 ] , [ 2039,4.04947725233333 ] , [ 2040,2.938584264 ] , [ 2041,4.41430684566667 ] , [ 2042,6.09239174133333 ] , [ 2043,3.218505675 ] , [ 2044,2.61719301433333 ] , [ 2045,5.15341485633333 ] , [ 2046,5.17034399933333 ] , [ 2047,3.99396541133333 ] , [ 2048,2.541339955 ] , [ 2049,2.23412194133333 ] , [ 2050,4.12979225633333 ] , [ 2051,5.52585600233333 ] , [ 2052,3.10564472166667 ] , [ 2053,1.442914165 ] , [ 2054,0.890551662 ] , [ 2055,5.010632627 ] , [ 2056,4.499215028 ] , [ 2057,4.25223326733333 ] , [ 2058,2.517717895 ] , [ 2059,5.04737805366667 ] , [ 2060,2.00420055733333 ] , [ 2061,4.517325274 ] , [ 2062,3.406301052 ] , [ 2063,6.75184091633333 ] , [ 2064,6.21352041566667 ] , [ 2065,5.24659075966667 ] , [ 2066,7.40210373466667 ] , [ 2067,3.94593388933333 ] , [ 2068,4.08267937 ] , [ 2069,5.271262689 ] , [ 2070,2.60721925566667 ] , [ 2071,2.843308622 ] , [ 2072,3.845277667 ] , [ 2073,5.398821813 ] , [ 2074,3.53438511066667 ] , [ 2075,7.239767689 ] , [ 2076,2.83963407933333 ] , [ 2077,3.656694888 ] , [ 2078,2.628741577 ] , [ 2079,2.05931869733333 ] , [ 2080,4.74422828366667 ] ]
  }
  ]
}

function testData2() {
  return stream_layers(3,128,.1).map(function(data, i) {
    return { 
      key: 'Stream' + i,
      values: data
    };
  });
}

